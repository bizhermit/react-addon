"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const react_1=__importDefault(require("react")),css_var_1=require("../../../styles/css-var"),jsx_style_1=__importDefault(require("../../../styles/jsx-style")),dom_1=require("../../../utils/dom"),check_box_1=require("../../inputs/check-box"),data_view_1=require("../data-view"),cn="bh-dv_c-ckb",DataViewCheckBoxColumn=e=>{const t=e.checkedValue??!0,l=e.uncheckedValue??!1;let a,n,c=!1;return{width:-1,sort:!1,resize:!1,cellTextAlign:"center",...e,bindedItems:l=>{if(!1===e.batchCheck)return;let n=!0;if(0===l.length)n=!1;else for(const a of l)if(a[e.name]!==t){n=!1;break}a?.setAttribute("data-checked",String(c=n))},initialize:()=>{const t=document.createElement("div");return t.classList.add(cn,check_box_1.checkBoxCn),e.disabled?(t.setAttribute("data-m","d"),t.setAttribute("data-disabled",String(!0===e.disabled))):t.setAttribute("data-m","e"),t.setAttribute("data-fill",String(!0===e.checkBoxFill)),{elem:t}},headerCellInitialize:e.batchCheck&&!e.disabled?(t,l)=>{t.headerCellElement.classList.add(`${cn}-hcell`);const c=document.createElement("div");c.classList.add(`${cn}-hwrap`),"string"==typeof e.headerCellLabel&&(t.headerCellLabelElement.textContent=e.headerCellLabel),c.appendChild(n=t.headerCellLabelElement),null==e.headerCellLabel&&(t.headerCellLabelElement.style.display="none"),a=(0,dom_1.cloneDomElement)(l.elem),c.appendChild(a),t.headerCellElement.appendChild(c)}:e.headerCellInitialize,headerCellLabel:e.batchCheck&&!e.disabled?(l,d,i)=>{let r=!0;if(0===d.length)r=!1;else for(const l of d)if(l.data[e.name]!==t){r=!1;break}a?.setAttribute("data-checked",String(c=r)),"function"==typeof e.headerCellLabel&&e.headerCellLabel(n,d,i)}:e.headerCellLabel,clickHeaderCell:e.batchCheck&&!e.disabled?(n,d,i)=>{!0!==e.disabled&&!1!==e.batchCheck&&((c=!c)?d.forEach((e=>e.data[n]=t)):d.forEach((e=>e.data[n]=l)),a?.setAttribute("data-checked",String(c)),i(),e.clickHeaderCell?.(n,d,i))}:e.clickHeaderCell,cellInitialize:(e,t)=>{e.element.classList.add(`${cn}-cell`);const l=(0,dom_1.cloneDomElement)(t.elem);e.contentElements.push(l),e.element.appendChild(l)},cellRender:({contentElements:e,row:l,cache:a,column:n})=>{const c=l.item.data[n.name]===t;a[n.name]!==c&&e[0].setAttribute("data-checked",String(a[n.name]=c))},clickCell:e.toggleRowClick||e.disabled?e.clickCell:(a,n)=>{if(n?.ctrlKey||n?.shiftKey)return e.clickCell?.(a,n);const c=a.data[e.name],d=a.data[e.name]=c===t?l:t;return a.getSelectedCells().forEach((t=>{t.columnName===e.name&&(t.data[t.columnName]=d)})),e.endedEdit?.({before:{value:c,checked:c===t},after:{value:d,checked:d===t}},{columnName:e.name,data:a.data,index:a.rowNumber-1,id:a.id},!0),e.clickCell?e.clickCell(a,n):{renderHeaderCell:!0,renderFooterCell:!0}},clickRow:e.toggleRowClick&&!e.disabled?(a,n)=>{if(n?.ctrlKey||n?.shiftKey)return e.clickRow?.(a,n);const c=a.data[e.name],d=a.data[e.name]=c===t?l:t;return a.getSelectedRows().forEach((t=>{t.data[e.name]=d})),e.endedEdit?.({before:{value:c,checked:c===t},after:{value:d,checked:d===t}},{columnName:e.name,data:a.data,index:a.rowNumber-1,id:a.id},!0),e.clickRow?e.clickRow(a,n):{renderHeaderCells:!0,renderFooterCells:!0}}:e.clickRow,_preventClearSelected:!0,jsxStyle:react_1.default.createElement(react_1.default.Fragment,null,check_box_1.CheckButtonStyle,Style)}},Style=react_1.default.createElement(jsx_style_1.default,{id:cn},(()=>`\n.${cn}-hwrap {\n  ${css_var_1.CssPV.flex}\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n  padding-top: 1px;\n  padding-left: 1px;\n  cursor: pointer;\n  height: 100%;\n  min-width: 0px;\n  flex: 1;\n}\n.${cn}-hwrap > .${data_view_1.dataViewCn}-lbl {\n  flex: none;\n}\n.${cn}-hcell[data-align="left"] .${cn}-hwrap {\n  align-items: flex-start;\n}\n.${cn}-hcell[data-align="left"] .${cn}-hwrap > .${data_view_1.dataViewCn}-lbl {\n  text-align: left;\n}\n.${cn}-hcell[data-align="center"] .${cn}-hwrap > .${data_view_1.dataViewCn}-lbl {\n  text-align: center;\n}\n.${cn}-hcell[data-align="right"] .${cn}-hwrap {\n  align-items: flex-end;\n}\n.${cn}-hcell[data-align="right"] .${cn}-hwrap > .${data_view_1.dataViewCn}-lbl {\n  text-align: right;\n}\n.${cn}-cell[data-disabled="false"] {\n  cursor: pointer;\n}\n.${cn}-cell[data-disabled="true"] > .${cn} {\n  ${css_var_1.CssPV.inactOpacity}\n}\n.${cn}-cell > .${cn}::after {\n  transition: unset;\n}\n`));exports.default=DataViewCheckBoxColumn;